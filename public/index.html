<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>HTML5 Page</title>
    </head>
    <body>
        <ul></ul>
        <button id="get">Get</button>
        <button id="post">Post</button>
        <button id="delete">Delete</button>
        <p>DELETE BY ID: <input type="text" id="id2Delete" /></p>
        <p>latitude: <input type="text" id="latitude" /></p>
        <p>longitude: <input type="text" id="longitude" /></p>
        <div id="res"></div>
        <script>
            const URL = "/locations";

            const getLocation = async () => {
                let js = await fetch(URL);
                let data = await js.json();

                let ul = document.querySelector("ul");
                ul.innerHTML = data
                    .map(
                        (point) =>
                            `<li>latitude: ${point.latitude}, longitude: ${point.longitude}</li>`
                    )
                    .join("");
            };
            const postLocation = async (location) => {
                let la = document.getElementById("latitude").value;
                let lo = document.getElementById("longitude").value;
                const rawResponse = await fetch(URL, {
                    method: "POST",
                    headers: {
                        Accept: "application/json",
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ latitude: la, longitude: lo }),
                });
                //document.getElementById("res").innerHTML = await rawResponse.json();
            };
            const deleteLocation = async (id) => {
                let id2Delete = document.getElementById("id2Delete").value;
                const rawResponse = await fetch(URL + "/" + id2Delete, {
                    method: "DELETE",
                    headers: {
                        Accept: "application/json",
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(),
                });
                //document.getElementById("res").innerHTML = await rawResponse.json();
            };

            window.addEventListener("load", () => {
                document
                    .querySelector("#get")
                    .addEventListener("click", getLocation);
                document
                    .querySelector("#post")
                    .addEventListener("click", () =>
                        postLocation({ lat: 60, lon: 60 })
                    );
                document
                    .querySelector("#delete")
                    .addEventListener("click", () => deleteLocation(1));
            });
        </script>
    </body>
</html>
